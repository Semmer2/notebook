表结构优化
===============

## 选择合适的数据类型
1. 使用能存储的最小的数据类型；
2. 使用简单数据类型。INT处理最简单；
3. 尽可能使用`NOT NULL`；
4. 尽量少使用text类型，非用不可时考虑分表；

使用INT存储时间类型，用`FROM_UNIXTIME(time)`和`UNIX_TIMESTAMP('2015-07-01 23:09:09')`进行类型转换。

使用BIGINT存储IP地址，用`INET_ATON('192.168.0.1')`和`INET_NTOA(ip)`

## 表的范式化和反范式化
范式化：第一二三范式和BC范式。

反范式化：范式化导致分表，可能对业务查询写入很慢麻烦，这是就不要拘泥形式。

## 表的垂直拆分
一个有很多列的表拆分为多个表，解决表过宽的情况。原则：
1. 把不常用的字段单独放到一个表中；
2. 把大字段独立放到一个表中；
3. 把经常用的字段放到一起；


## 表的水平拆分
主要是解决单表数据量过大的问题。方法：
1. 对id进行hash把其分为5个表；
2. 针对不同ID放到相应表中；

但是仍然需要有一个完整的表，分开的表主要是给前台读写操作的。这样能提高效率。


